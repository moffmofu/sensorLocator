# sensorLocator

GPSシステムから出力された座標データを、トポグラフィとかで使いやすい形に書き下すもの。getLocがメインです。それ以外の関数については、getlocから呼ばれるもの。もしくは機能を拡張したものです。readmeでは以下の点について記載します。
- 構成するファイルの説明
- 座標の変換について
- 今後の展望

----
### ---tester.m---
getLocなどの機能を確認するためのスクリプトです。
test1...1).xmlとtest2...2).xmlから指定した次元の座標でプロットを書きます。<br>
図は3つ出力され、出力先はresImagesフォルダの中となります。<br>
- ２データを単純に重ねてプロットした図
- 2データの平均値をプロットした図
- 平均と標準偏差を反映したプロット
の3つが出力されます。

### ---getLoc.m---

座標配列の出力。
引数はfilename
また、第二引数にオプションを渡すことで、出力形式を変えることができます。
<br><現在対応しているオプション>
- "xy"
- 3


###### "xy"
xy２次元平面に落とします。"ラボ内で以前よりよく使われているtopographyのmatプログラム"(公称を知らない)の中にあるloc変数をそのまま代替するために作りました<br>
この時、「どの方向(z軸)で２次元に投影するのか」「xy軸はどう設定するのか」問題が生じます。それについては以下の通りに対応を行なっております。

z軸→チャンネル群から求めた頭の中央と、Czを結ぶ線<br>
x軸→Czとnasion(鼻の付け根)を結ぶ線,後頭(0)から前頭(1)に向かって座標設定<br>
y軸→x,z軸に直交,左(0)から右(1)に向かって座標設定<br>
となります。<br>
注意すべき点として、*耳の位置が座標(0,0)(0,1)ではない*　ことがあげられます。

###### 3
3次元そのまま出力します。x,y,zの順で、二次元配列に入っています

### ---averageLoc---
二つ以上のチャンネル座標ファイルから平均と各軸方向の分散を計算して出力します。<br>
内部でgetLocを使用しています。

### ---readxml.m---
xmlファイルを読み込んでmatlab構造体にして渡すもの。かなり癖があるので、この出力を直接使うのはしんどいかもしれません。.Children(4)の.Children(6)の....という感じでかなり深い階層に座標データがいます。これを記述するにあたり参考にした(パクってきた)サイトのurlが冒頭に載っています。

### ---readnsi.m---
gpsシステムで別のファイル形式を選んで保存した時のためのものです。未完成

### ---readsfp.m---
gpsシステムで別のファイル形式を選んで保存した時のためのものです。未完成

### ---error3d.m---
errorbar()の3次元版みたいな雰囲気のやつです。各軸方向に標準偏差を求めて、その分だけ球を各軸方向に引き伸ばして表示しています。統計的に意味のある検討ができるかはわかりません。

----

### 座標の変換
getlocのオプションの段階でも述べられていますが...

-----

### 今後の展望
基本的には、出力オプションの拡張をやる必要があります。<br>
xyを単純に写像するのではなく、耳の位置を基準に変換するなどもやってみたいです<br>
